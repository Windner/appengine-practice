syntax = "proto3";
option java_multiple_files = true;
option java_package = "com.appengine.practice";
option java_outer_classname = "UnLockServiceProto";
//option objc_class_prefix = "HLW";


package com.appengine.practice;


// This API lets you request an unlock token.
service UnlockService {
  // Requests an unlock token for a device.
  // Returns INVALID_ARGUMENT if challenge value isn't understood.
  // Returns PERMISSION_DENIED if the user is not allowed to unlock this
  // device.
  rpc RequestUnlockToken(UnlockTokenRequest) returns (UnlockToken);
}

message UnlockTokenRequest {
  // The challenge bytes for this request, as generated by the device under
  // repair.
  bytes challenge = 1;
  // An obfuscated ID for the user requesting to unlock a device.
  string user_id = 2;
  // A proof of the user ID.
  string user_jwt = 3;
}

message UnlockToken {
  // An opaque sequence of bytes containing an unlock token.
  bytes token = 1;
}
